<div class="row" ng-hide="modelList.length == 0 || updateLoading">
    <h3>Продажа товара</h3>

    <div class="col-xs-12 top20">
        <button class="btn btn-default btn-block" ng-click="updateList()">Обновить</button>
        <button class="btn btn-default btn-block" ng-click="currentSale.getSaleInfo();"><i class="fa fa-calculator"></i> Расчитать</button>
    </div>

    
    <div class="col-xs-12">
        <h3 class="top30">Итоговый список</h3>
        <table class="table table-condensed table-hover">
            <thead>
                <tr>
                    <th>Наименование</th>
                    <th>Тип/цвет</th>
                    <th>Количество</th>
                    <th>Цена за штуку</th>
                    <th>Итого цена</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="item in modelList" ng-if="item.saleCount > 0">
                    <td>{{item.model}}</td>
                    <td>{{item.type}}</td>
                    <td>{{item.saleCount}}</td>
                    <td>{{item.currentPrice}} руб</td>
                    <td>{{item.saleCount * item.currentPrice}} руб</td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td><b>{{saleModel.allCaseCount}}</b> штук</td>
                    <td></td>
                    <td><b>{{saleModel.sum}}</b> руб</td>
                </tr>
            </tbody>
        </table>
        <p>Чистая прибыль {{saleModel.ourProfit}}</p>
    </div>

    <div class="model-list col-xs-12">
        <div class="row row-item" ng-class="{'title' : item.rowType == 'title', 'sub-title' : item.rowType == 'sub-title', 'has-changes' : item.saleCount > 0}" ng-repeat="item in modelList">
            <div class="col-xs-4 first-col">
                <span>{{item.model}}</span>
            </div>
            <div class="col-xs-1">
                {{item.type}}
            </div>
            <div class="form-group col-xs-6" ng-class="{'has-success' : item.saleCount > 0}" ng-hide="item.rowType=='title' || item.rowType=='sub-title'">
                <input class="form-control count" type="number" ng-model="item.saleCount" min="0" ng-maxlength="item.count" ng-disabled="item.count == 0" />
                <span class="text-success has-count" ng-show="item.count > 0"><b>{{item.count}}</b> в наличии</span>
                <span class="text-danger has-count" ng-show="item.count == 0">Нет в наличии</span>
            </div>
        </div>
    </div>

    <div class="col-xs-12 top20">
        <button class="btn btn-default btn-block" ng-click="updateList()">Обновить</button>
    </div>
    <hr />
</div>


<div class="col-xs-12" ng-show="modelList.length == 0 || updateLoading">
    <div class="text-center" style="margin-top: 150px">
        <img src="/images/loading.gif" width="100" />
    </div>
</div>